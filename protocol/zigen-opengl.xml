<?xml version="1.0" encoding="UTF-8"?>
<protocol name="zigen-opengl">
  <copyright>Apache-2.0</copyright>
  <interface name="zgn_opengl" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc"/>

    <enum name="vertex_attribute_type">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#vertex_attribute_type"/>
      <entry name="byte" value="0"/>
      <entry name="unsigned_byte" value="1"/>
      <entry name="short" value="2"/>
      <entry name="unsigned_short" value="3"/>
      <entry name="int" value="4"/>
      <entry name="unsigned_int" value="5"/>
      <entry name="half_float" value="6"/>
      <entry name="float" value="7"/>
      <entry name="double" value="8"/>
      <entry name="fixed" value="9"/>
      <entry name="int_2_10_10_10_rev" value="10"/>
      <entry name="unsigned_int_2_10_10_10_rev" value="11"/>
      <entry name="unsigned_int_10f_11f_11f_rev" value="12"/>
    </enum>

    <enum name="topology">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#topology"/>
      <entry name="points" value="0"/>
      <entry name="line_strip" value="1"/>
      <entry name="line_loop" value="2"/>
      <entry name="lines" value="3"/>
      <entry name="line_strip_adjacency" value="4"/>
      <entry name="lines_adjacency" value="5"/>
      <entry name="triangle_strip" value="6"/>
      <entry name="triangle_fan" value="7"/>
      <entry name="triangles" value="8"/>
      <entry name="triangle_strip_adjacency" value="9"/>
      <entry name="triangles_adjacency" value="10"/>
      <!-- <entry name="patches" value="11"/> reserved -->
    </enum>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#destroy"/>
    </request>

    <request name="create_opengl_component">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#create_opengl_component"/>
      <arg name="id" type="new_id" interface="zgn_opengl_component"/>
      <arg name="virtual_object" type="object" interface="zgn_virtual_object"/>
    </request>

    <request name="create_vertex_buffer">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#create_vertex_buffer"/>
      <arg name="id" type="new_id" interface="zgn_oepngl_vertex_buffer"/>
    </request>

    <request name="create_shader_program">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#create_shader_program"/>
      <arg name="id" type="new_id" interface="zgn_opengl_shader_program"/>
    </request>

    <request name="create_texture">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl.adoc#create_texture_2d"/>
      <arg name="id" type="new_id" interface="zgn_opengl_texture"/>
    </request>
  </interface>

  <interface name="zgn_opengl_component" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc"/>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#destroy"/>
    </request>

    <request name="attach_vertex_buffer">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#attach_vertex_buffer"/>
      <arg name="vertex_buffer" type="object" interface="zgn_opengl_vertex_buffer" allow-null="true"/>
    </request>

    <request name="attach_shader_program">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#attach_shader_program"/>
      <arg name="shader_program" type="object" interface="zgn_opengl_shader_program" allow-null="true"/>
    </request>

    <request name="attach_texture">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#attach_texture"/>
      <arg name="texture" type="object" interface="zgn_opengl_texture" allow-null="true"/>
    </request>

    <request name="add_vertex_attribute">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#add_vertex_attribute"/>
      <arg name="index" type="uint"/>
      <arg name="size" type="uint"/>
      <arg name="type" type="uint" enum="zgn_opengl.vertex_attribute_type"/>
      <arg name="normalized" type="uint"/>
      <arg name="stride" type="uint"/>
      <arg name="pointer" type="uint"/>
    </request>

    <request name="clear_vertex_attribute">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#clear_vertex_attribute"/>
    </request>

    <request name="set_topology">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#set_topology"/>
      <arg name="topology" type="uint" enum="zgn_opengl.topology"/>
    </request>

    <request name="set_min">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#set_min"/>
      <arg name="min" type="uint"/>
    </request>

    <request name="set_count">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_component.adoc#set_count"/>
      <arg name="count" type="uint"/>
    </request>
  </interface>

  <interface name="zgn_opengl_vertex_buffer" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_vertex_buffer.adoc"/>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_vertex_buffer.adoc#destroy"/>
    </request>

    <request name="attach">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_vertex_buffer.adoc#attach"/>
      <!-- TODO: replace with a simpler buffer interface: zgn_buffer -->
      <arg name="buffer" type="object" interface="wl_buffer"/>
      <arg name="size" type="uint"/>
    </request>
  </interface>

  <interface name="zgn_opengl_shader_program" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc"/>

    <enum name="error">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc#error"/>
      <entry name="compilation_error" value="0"/>
      <entry name="linkage_error" value="1"/>
    </enum>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc#destroy"/>
    </request>

    <request name="set_vertex_shader">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc#set_vertex_shader"/>
      <arg name="vertex_shader_source" type="fd"/>
      <arg name="vertex_shader_size" type="uint"/>
    </request>

    <request name="set_fragment_shader">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc#set_fragment_shader"/>
      <arg name="fragment_shader_source" type="fd"/>
      <arg name="fragment_shader_size" type="uint"/>
    </request>

    <request name="link">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_shader_program.adoc#link"/>
    </request>
  </interface>

  <interface name="zgn_opengl_texture" version="1">
    <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_texture.adoc"/>

    <request name="destroy" type="destructor">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_texture.adoc#destroy"/>
    </request>

    <request name="attach_2d">
      <description summary="http://github.com/zigen-project/zigen/blob/main/docs/protocol/zigen-opengl/zgn_opengl_texture.adoc#set_image_2d"/>
      <!-- TODO: replace with a simpler buffer interface: zgn_buffer -->
      <arg name="buffer" type="object" interface="wl_buffer"/>
      <arg name="format" type="uint" enum="wl_shm.format"/>
      <arg name="width" type="uint"/>
      <arg name="height" type="uint"/>
    </request>
  </interface>
</protocol>
